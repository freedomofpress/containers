---
- name: Load container config.
  set_fact:
    container_config: "{{ lookup('file', item+'/meta.yml')|from_yaml }}"

- name: Build container image.
  docker_image:
    name: "{{ container_config.repo }}"
    force: "{{ container_config.force|default(omit) }}"
    path: "{{ container_config.repo|basename }}"
    state: present
    tag: "{{ container_config.tag }}"
    buildargs: "{{ container_config.args|default(omit) }}"
